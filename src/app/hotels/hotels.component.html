<div class="container my-4">
    <h2 class="text-center mb-4">Book Hotels</h2>
    <form [formGroup]="searchForm" (ngSubmit)="onSearch()" class="bg-white p-4 rounded shadow mx-auto" style="max-width: 1100px;">
      <div class="row align-items-end g-3">
        <div class="col-md-3">
          <label class="form-label fw-bold">Where to</label>
          <input type="text" class="form-control" formControlName="location" placeholder="Enter city or location">
        </div>
        <div class="col-md-3">
          <label class="form-label fw-bold">Check-in</label>
          <input type="date" class="form-control" formControlName="checkIn">
        </div>
        <div class="col-md-3">
          <label class="form-label fw-bold">Check-out</label>
          <input type="date" class="form-control" formControlName="checkOut">
        </div>
        <div class="col-md-2">
          <label class="form-label fw-bold">Guests & Rooms</label>
          <select class="form-select" formControlName="guestsRooms">
            <option value="1|1">1 Adult | 1 Room</option>
            <option value="2|1">2 Adults | 1 Room</option>
            <option value="2|2">2 Adults | 2 Rooms</option>
            <option value="4|2">4 Adults | 2 Rooms</option>
          </select>
        </div>
        <div class="col-md-1 d-flex align-items-end">
          <button type="submit" class="btn btn-warning w-100 py-2">
            Search
          </button>
        </div>
      </div>
    </form>
  
    <div class="mt-4">
      <div *ngIf="filteredHotels !== null; else showAll">
        <div *ngIf="filteredHotels.length > 0; else noHotels">
          <div class="row">
            <div *ngFor="let availability of filteredHotels" class="col-12 mb-3">
              <div class="card h-100">
                <div class="card-body d-flex justify-content-between align-items-center p-4">
                  <div>
                    <div class="d-flex align-items-center mb-2">
                      <h5 class="card-title mb-0">{{ availability.hotel.name }}</h5>
                      <span class="badge bg-success ms-2">
                        ★ {{ getHotelRating(availability.hotel.hotelId) | number:'1.1-1' }}
                      </span>
                    </div>
                    <p class="card-text mb-1">
                      <i class="fas fa-map-marker-alt me-2"></i>
                      {{ availability.hotel.location }}
                    </p>
                    <p class="card-text text-muted">
                      <i class="fas fa-users me-2"></i>
                      Available Rooms: {{ availability.capacity }}
                    </p>
                  </div>
                  <div class="text-end">
                    <h4 class="text-primary mb-3">
                      {{ availability.hotel.pricePerNight | currency:'INR' }}
                      <small class="text-muted">/night</small>
                    </h4>
                    <button class="btn btn-primary px-4" 
                            (click)="onBookNow(availability.hotel.hotelId)"
                            [attr.aria-label]="'Book ' + availability.hotel.name">
                      Book Now
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <ng-template #noHotels>
          <div class="alert alert-warning text-center">
            <i class="fas fa-exclamation-triangle me-2"></i>
            No hotels found for the specified criteria.
          </div>
        </ng-template>
      </div>
      <ng-template #showAll>
        <div class="row">
          <div *ngFor="let hotel of allHotels" class="col-12 mb-3">
            <div class="card h-100">
              <div class="card-body d-flex justify-content-between align-items-center p-4">
                <div>
                  <div class="d-flex align-items-center mb-2">
                    <h5 class="card-title mb-0">{{ hotel.name }}</h5>
                    <span class="badge bg-success ms-2">
                      ★ {{ getHotelRating(hotel.hotelId) | number:'1.1-1' }}
                    </span>
                  </div>
                  <p class="card-text mb-1">
                    <i class="fas fa-map-marker-alt me-2"></i>
                    {{ hotel.location }}
                  </p>
                </div>
                <div class="text-end">
                  <h4 class="text-primary mb-3">
                    {{ hotel.pricePerNight | currency:'INR' }}
                    <small class="text-muted">/night</small>
                  </h4>
                  <button class="btn btn-primary px-4" 
                          (click)="onBookNow(hotel.hotelId)"
                          [attr.aria-label]="'Book ' + hotel.name">
                    Book Now
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </ng-template>
    </div>
  </div>