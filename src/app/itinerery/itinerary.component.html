<div class="container mt-5">
  <div class="row">
    <!-- Left Column: Payment Card -->
    <div class="col-md-3">
      <div class="card shadow-lg">
        <div class="card-body">
          <h5 class="card-title text-primary">Payment Details</h5>
          <p class="card-text">
            <strong>Total Price:</strong> ₹{{ totalPrice }}
          </p>
          <h6 class="text-secondary">Customization Details</h6>
          <ul>
            <li *ngFor="let activity of customizedActivities">
              {{ activity.name }} - ₹{{ activity.price }}
            </li>
          </ul>
          <button class="btn btn-primary w-100 mt-3" (click)="proceedToPayment()">Proceed to Payment</button>
        </div>
      </div>
    </div>

    <!-- Right Column: Itinerary Details -->
    <div class="col-md-9">
      <h2 class="text-center text-primary">Itinerary - {{ itinerary?.travelPackage?.name }}</h2>

      <!-- Itinerary Days -->
      <div *ngFor="let day of days" class="card shadow-lg my-4">
        <div class="card-body">
          <h4 class="card-title text-primary">Day {{ day.day }}</h4>

          <!-- Hotel Details for Day 1 -->
          <div *ngIf="day.hotel">
            <p><strong>Hotel:</strong> {{ day.hotel.name }}</p>
          </div>

          <!-- Flights Included Check for Day 1 -->
          <div *ngIf="day.day === 1">
            <div *ngIf="itinerary?.travelPackage?.includedFlights?.length; else noFlight">
              <p><strong>Flight Price Per Person:</strong> ₹{{ itinerary.travelPackage.includedFlights[0]?.price }}</p>
            </div>
            <ng-template #noFlight>
              <p class="text-danger">You have to arrange your own transportation to the location.</p>
            </ng-template>
          </div>

          <!-- Activities for the Day -->
          <div>
            <h5 class="text-secondary">Activities</h5>
            <ul>
              <li *ngFor="let activity of day.activities">
                {{ activity.name }} - ₹{{ activity.price }}
                <button class="btn btn-danger btn-sm ms-2" (click)="removeActivity(activity.activityId, day.day)">Remove</button>
              </li>
            </ul>
          </div>

          <!-- Add Activity Button -->
          <button class="btn btn-success w-100" (click)="openActivitySelector(day.day)">Add Activity</button>
        </div>
      </div>

      <!-- Activity Selector -->
      <app-activity-selector
        [location]="itinerary?.travelPackage?.location"
        (activityAdded)="addActivity($event)">
      </app-activity-selector>
    </div>
  </div>

